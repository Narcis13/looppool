---
phase: 02-context-aware-reasoning
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - get-shit-done/references/context-assembly.md
  - get-shit-done/templates/decisions.md
autonomous: true

must_haves:
  truths:
    - "Context gathering follows explicit priority order (PROJECT.md > REQUIREMENTS.md > prior decisions > research > codebase)"
    - "DECISIONS.md template exists with session-based structure"
    - "Session decision history format is documented"
    - "Context citation format is specified with line/section references"
  artifacts:
    - path: "get-shit-done/references/context-assembly.md"
      provides: "Prioritized context gathering pattern for autonomous decisions"
      min_lines: 150
    - path: "get-shit-done/templates/decisions.md"
      provides: "DECISIONS.md template for persistent audit trail"
      min_lines: 40
  key_links:
    - from: "get-shit-done/references/context-assembly.md"
      to: "get-shit-done/references/autonomous.md"
      via: "References autonomous mode patterns"
      pattern: "autonomous\\.md"
---

<objective>
Create reference documentation for context-aware autonomous decision-making: prioritized context gathering, session decision history format, and DECISIONS.md template for persistent audit trail.

Purpose: Enable Phase 2 implementation by documenting the patterns before integrating them into workflows. Following Phase 1's pattern where documentation precedes workflow integration.

Output: Two reference files that workflows will use for context-aware autonomous decisions.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-context-aware-reasoning/02-RESEARCH.md

# Phase 1 reference docs (patterns to follow)
@get-shit-done/references/autonomous.md
@get-shit-done/references/autonomous-defaults.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create context-assembly.md reference document</name>
  <files>get-shit-done/references/context-assembly.md</files>
  <action>
Create reference document covering:

1. **Overview**: What context assembly is and why prioritized gathering matters (avoid context overload)

2. **Context Priority Order**:
   - Level 1 (highest): PROJECT.md - Core Value, Constraints, Key Decisions
   - Level 2: REQUIREMENTS.md - Active requirements, Out of Scope
   - Level 3: Session decision history - Prior decisions for consistency
   - Level 4: Domain knowledge - RESEARCH.md, CONTEXT.md
   - Level 5 (lowest): Codebase state - Codebase map, file verification

3. **Context Gathering Pattern**: Step-by-step process
   - Check each level in priority order
   - Stop when context is sufficient for the decision
   - Document the `gather_decision_context` step pattern from research

4. **Citation Format**:
   - Specific references: `[FILE.md:Section Name]` or `[FILE.md:L42]`
   - Session references: `[S001]` for prior session decisions
   - Combined: `[PROJECT.md:Constraints, S002]`
   - Include examples of good and bad citations

5. **Session Decision History Format**:
   - Table format with ID, Decision, Choice, Reason, Context columns
   - Sequential IDs (S001, S002, etc.)
   - Pattern for checking history before making new decision
   - Pattern for referencing prior decisions
   - Pattern for overriding prior decisions with justification

6. **Integration with Autonomous Mode**:
   - Reference autonomous.md for config reading
   - Show how context assembly plugs into autonomous decision wrapper
   - Context is gathered BEFORE decision is made

Follow style of autonomous.md and autonomous-defaults.md - clear sections, code blocks for patterns, examples.
  </action>
  <verify>
- File exists at get-shit-done/references/context-assembly.md
- Contains all 6 sections listed above
- References autonomous.md (grep for pattern)
- Contains priority order table or list
- Contains citation format with examples
- At least 150 lines
  </verify>
  <done>
Context assembly reference document exists with prioritized gathering pattern, citation format, and session history format documented.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create decisions.md template</name>
  <files>get-shit-done/templates/decisions.md</files>
  <action>
Create template for `.planning/DECISIONS.md` that will store the persistent audit trail.

Template structure:

1. **Header comment**: Explain what this file tracks

2. **Format Section**: Document the table columns:
   - ID: Session-scoped (D001, D002, etc.)
   - Timestamp: UTC time (HH:MM:SS)
   - Decision Point: What was being decided (brief)
   - Choice: The selected option
   - Reason: Brief rationale (10-20 words)
   - Context Refs: Specific sources cited
   - Confidence: HIGH/MEDIUM/LOW

3. **Current Session placeholder**: Where new decisions go

4. **Session separator**: `---` between sessions

5. **Example session**: Show one completed session with 2-3 example decisions

Include template markers for:
- `[YYYY-MM-DDTHH:MM:SSZ]` for session timestamp
- `[next_id]` for decision ID

Follow GSD template conventions - usable directly by workflows, not just documentation.
  </action>
  <verify>
- File exists at get-shit-done/templates/decisions.md
- Contains format section explaining columns
- Contains table header row
- Contains example decisions
- Contains session separator pattern
- At least 40 lines
  </verify>
  <done>
DECISIONS.md template exists with session-based structure, column documentation, and example decisions.
  </done>
</task>

</tasks>

<verification>
After both tasks complete:

1. Reference doc exists:
```bash
test -f get-shit-done/references/context-assembly.md && echo "context-assembly.md exists"
```

2. Template exists:
```bash
test -f get-shit-done/templates/decisions.md && echo "decisions.md template exists"
```

3. Reference doc has required content:
```bash
grep -c "Priority" get-shit-done/references/context-assembly.md  # Should find priority order
grep -c "Citation" get-shit-done/references/context-assembly.md  # Should find citation format
grep -c "Session" get-shit-done/references/context-assembly.md   # Should find session history
```

4. Template has required structure:
```bash
grep "Decision Point" get-shit-done/templates/decisions.md  # Table header
grep "Context Refs" get-shit-done/templates/decisions.md    # Table header
grep "---" get-shit-done/templates/decisions.md             # Session separator
```
</verification>

<success_criteria>
- context-assembly.md reference document created with prioritized gathering pattern
- decisions.md template created with session-based audit trail structure
- Both files follow GSD reference/template conventions
- Documentation is sufficient for Plan 02-02 to implement the patterns
</success_criteria>

<output>
After completion, create `.planning/phases/02-context-aware-reasoning/02-01-SUMMARY.md`
</output>
