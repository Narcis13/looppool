---
phase: 01-inner-voice-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - get-shit-done/references/autonomous.md
  - get-shit-done/references/autonomous-defaults.md
autonomous: true

must_haves:
  truths:
    - "Canonical pattern for reading autonomous flag exists and is documented"
    - "Decision trace format is specified and consistent"
    - "Documented defaults exist for common decisions when context is insufficient"
    - "Graceful degradation behavior is defined"
  artifacts:
    - path: "get-shit-done/references/autonomous.md"
      provides: "Canonical autonomous flag reading pattern, decision wrapper structure, trace format"
      min_lines: 100
      contains: "AUTONOMOUS="
    - path: "get-shit-done/references/autonomous-defaults.md"
      provides: "Documented defaults for checkpoint types and common decisions"
      min_lines: 80
      contains: "checkpoint:human-verify"
  key_links:
    - from: "get-shit-done/references/autonomous.md"
      to: ".planning/config.json"
      via: "config reading pattern"
      pattern: 'cat .planning/config.json.*autonomous'
---

<objective>
Create the foundational reference documentation for autonomous mode: the canonical pattern for reading the config flag, the decision trace format, and documented defaults for graceful degradation.

Purpose: Establish consistent patterns that all workflows will reference when implementing autonomous decision handling. Without this foundation, each workflow would implement autonomy differently, leading to inconsistent behavior.

Output: Two reference documents that serve as the authoritative source for autonomous mode implementation.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/REQUIREMENTS.md
@.planning/phases/01-inner-voice-foundation/01-RESEARCH.md
@get-shit-done/references/checkpoints.md
@.planning/config.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create autonomous.md reference document</name>
  <files>get-shit-done/references/autonomous.md</files>
  <action>
Create the canonical reference document for autonomous mode with these sections:

1. **Overview** - What autonomous mode is and the full commitment principle (VOICE-05)

2. **Config Flag Reading** (VOICE-01) - The exact bash pattern to read the flag:
```bash
AUTONOMOUS=$(cat .planning/config.json 2>/dev/null | grep -o '"autonomous"[[:space:]]*:[[:space:]]*[^,}]*' | grep -o 'true\|false' || echo "false")
```
Document that this MUST be used consistently everywhere. Default is `false` when config missing.

3. **Decision Trace Format** (VOICE-02) - The exact format:
```
Auto-decided: [choice] — [reason]
```
With examples:
- `Auto-decided: approved — All verification checks passed (tests: 42/42, build: success)`
- `Auto-decided: proceed — No blocking issues found in previous phase`
- `Auto-decided: standard depth — Insufficient context, using documented default`

4. **Autonomous Decision Wrapper Pattern** - The if/else structure that preserves interactive mode:
```markdown
**If AUTONOMOUS=true:**
  [Read context, apply policy, output trace]
  Continue to next step.

**If AUTONOMOUS=false:**
  [Existing AskUserQuestion or checkpoint handling - unchanged]
```

5. **Full Commitment Mode** (VOICE-05) - When autonomous is enabled, ALL decisions are auto-decided. No partial autonomy. Document this principle clearly.

6. **Key Rules**:
- Always output trace before proceeding
- Never silently skip decisions
- Preserve original interactive code paths unchanged
- Check flag once at workflow start, not repeatedly

Follow GSD style guide: imperative voice, no filler, substantive content.
  </action>
  <verify>
File exists at get-shit-done/references/autonomous.md with:
- grep confirms "AUTONOMOUS=" pattern
- grep confirms "Auto-decided:" format
- Contains overview, config reading, trace format, wrapper pattern sections
- At least 100 lines
  </verify>
  <done>Reference document exists with canonical autonomous mode patterns that workflows can reference.</done>
</task>

<task type="auto">
  <name>Task 2: Create autonomous-defaults.md reference document</name>
  <files>get-shit-done/references/autonomous-defaults.md</files>
  <action>
Create the defaults reference document for graceful degradation (VOICE-07) with these sections:

1. **Overview** - Purpose of defaults: when context is insufficient, use documented defaults and log assumptions. Never fail silently.

2. **Checkpoint Defaults** - For each checkpoint type:

   **checkpoint:human-verify**:
   - Default: Auto-approve if ALL automated verifications pass
   - Automated verifications: `npm test`, `npm run build`, `curl` endpoint checks
   - If ANY verification fails: Fall back to human (even in autonomous mode)
   - Trace: `Auto-decided: approved — All verification checks passed [details]`

   **checkpoint:decision**:
   - Default: Select first option that matches project context (stack, requirements)
   - If no clear match: Select safest/most reversible option
   - Trace: `Auto-decided: [option] — [context-based reason]`
   - Note: Phase 3 will add specific policies per decision type

   **checkpoint:human-action**:
   - Default: CANNOT be autonomous (requires human-only action like email verification)
   - In autonomous mode: Pause and wait for human
   - Trace: `Autonomous mode: Human action required for [action], cannot proceed automatically`

3. **Common Decision Defaults** (for graceful degradation):

   | Decision | Default | Assumption | Trace |
   |----------|---------|------------|-------|
   | Depth (planning) | standard | Medium complexity | `Auto-decided: standard depth — Insufficient context, using default` |
   | Parallelization | true | Modern multi-core system | `Auto-decided: parallel — Default enabled` |
   | Verification mode | enabled | Quality matters | `Auto-decided: verify — Default enabled` |
   | Previous issues | proceed | Issues were informational | `Auto-decided: proceed — No blocking issues` |

4. **Assumption Logging** - When using a default:
   - Always include "Assumption:" in trace
   - Example: `Auto-decided: standard depth — Insufficient context, using documented default. Assumption: standard phase complexity`

5. **When Defaults Don't Apply** - Some decisions have no safe default:
   - Authentication credentials
   - Destructive operations (delete, force push)
   - Architecture-level choices
   - For these: fall back to human even in autonomous mode

Follow GSD style guide: tables for structured data, clear examples, no filler.
  </action>
  <verify>
File exists at get-shit-done/references/autonomous-defaults.md with:
- grep confirms "checkpoint:human-verify" section
- grep confirms "checkpoint:decision" section
- grep confirms "Assumption:" pattern
- Contains defaults table
- At least 80 lines
  </verify>
  <done>Defaults reference document exists with graceful degradation policies for all checkpoint types and common decisions.</done>
</task>

</tasks>

<verification>
1. Both reference documents exist and are substantive (100+ and 80+ lines)
2. Patterns are consistent with existing GSD reference document style
3. Config reading pattern matches existing patterns in codebase (grep for similar patterns)
4. Trace format is consistent throughout both documents
5. Full commitment mode is clearly documented
6. Graceful degradation with assumption logging is specified
</verification>

<success_criteria>
- [ ] get-shit-done/references/autonomous.md exists with canonical patterns
- [ ] get-shit-done/references/autonomous-defaults.md exists with defaults
- [ ] Config flag reading pattern is documented (VOICE-01)
- [ ] Decision trace format is documented (VOICE-02)
- [ ] Full commitment mode is documented (VOICE-05)
- [ ] Graceful degradation with defaults is documented (VOICE-07)
- [ ] Both documents follow GSD style guide
</success_criteria>

<output>
After completion, create `.planning/phases/01-inner-voice-foundation/01-01-SUMMARY.md`
</output>
